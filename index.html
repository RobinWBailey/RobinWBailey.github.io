<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Robin Bailey - Portfolio</title>
    <meta name="author" content="Robin Bailey" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="description" content="Product Manager, Designer, & Engineer." />
    <meta name="keywords" content="Robin Bailey, Portfolio, Design, Product, UI, Engineer" />
    <meta name="theme-color" content="#545a63" />
    <meta name="supported-color-schemes" content="light, dark" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://robinbailey.me/" />
    <meta property="og:title" content="Robin Bailey" />
    <meta property="og:description" content="Product Manager, Designer, & Engineer." />
    <meta property="og:image" content="https://robinbailey.me/assets/images/social-preview.png" />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://robinbailey.me/" />
    <meta property="twitter:creator" content="@robinbailey" />
    <meta property="twitter:title" content="Robin Bailey" />
    <meta property="twitter:description" content="Product Manager, Designer, & Engineer." />
    <meta property="twitter:image" content="https://robinbailey.me/assets/images/social-preview.png" />

    <link rel="icon" type="image/png" sizes="48x48" href="assets/images/Favicon.png" />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        xintegrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>

<body id="top" data-theme="blue">

    <!-- Main Content Wrapper -->
    <main id="main-content">
        <nav class="top-nav">
            <ul>
                <li><a href="#home" class="nav-link active"><i class="fas fa-home"></i> <span>Home</span></a></li>
                <li><a href="#about" class="nav-link"><i class="fas fa-user"></i> <span>About</span></a></li>
                <li><a href="#work" class="nav-link"><i class="fas fa-briefcase"></i> <span>Work</span></a></li>
                <li><a href="#contact" class="nav-link"><i class="fas fa-envelope"></i> <span>Contact</span></a></li>
            </ul>
        </nav>

        <header id="home" class="section header">
            <div class="container">

                <!-- New Header Content -->
                <div class="header-new-layout">
                    <div class="header-new-layout__intro">
                        <h1 class="header-new-layout__name">Robin Bailey</h1>
                        <h1 class="header-new-layout__description">
                            Product Manager, Designer, and Engineer. I help turn complex business challenges into clear,
                            user-focused product solutions — working with you to design, architect, and implement
                            technical systems that deliver real impact.
                        </h1>
                    </div>

                    <div class="header-new-layout__details">
                        <div class="header-new-layout__column">
                            <h5 class="header-new-layout__title">Experience</h5>
                            <ul class="header-new-layout__list header-new-layout__list--experience">
                                <li>
                                    <div class="experience-link">
                                        <span class="experience-link__title">Digital Education Product Manager<br><span
                                                class="experience-link__company">Plymouth University</span></span>
                                        <span class="experience-link__tag">Current</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="experience-link">
                                        <span class="experience-link__title">Product Architect<br><span
                                                class="experience-link__company">iotec Global</span></span>
                                        <span class="experience-link__year">2016—2018</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="experience-link">
                                        <span class="experience-link__title">Freelance Product Design &
                                            Development
                                            <br><span class="experience-link__company">Clients inc: Wild Planet
                                                Trust, ToolFinder, Local Gov, Apollo Health Innovations</span></span>
                                        <span class="experience-link__year">2010—Present</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="header-new-layout__column">
                            <h5 class="header-new-layout__title header__availability">Available for opportunities
                            </h5>
                            <ul class="header-new-layout__list header-new-layout__list--links">
                                <li><a href="https://twitter.com/RobinBailey" target="_blank"
                                        rel="noopener noreferrer">Twitter</a></li>
                                <li><a href="https://www.linkedin.com/in/robinwbailey/" target="_blank"
                                        rel="noopener noreferrer">LinkedIn</a></li>
                                <li><a href="mailto:robin.w.bailey@gmail.com">Email</a></li>
                            </ul>
                            <a href="#" class="cv-card">
                                <div class="cv-card__icon">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <div class="cv-card__text">
                                    <span class="cv-card__title">View Full CV/Resume</span>
                                    <span class="cv-card__arrow">→</span>
                                </div>
                            </a>
                        </div>
                    </div>

                    <div class="header-new-layout__expertise-row">
                        <div class="header-new-layout__expertise-group">
                            <h5 class="header-new-layout__title">Sectors</h5>
                            <div class="expertise-scroll-wrapper">
                                <ul class="expertise-cards">
                                    <li class="expertise-card" data-color="green" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-graduation-cap"></i>
                                                <span class="expertise-card__title">Education</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="red" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-heartbeat"></i>
                                                <span class="expertise-card__title">Health</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="blue" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-landmark"></i>
                                                <span class="expertise-card__title">Government</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="orange" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-bullhorn"></i>
                                                <span class="expertise-card__title">AdTech</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="teal" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-leaf"></i>
                                                <span class="expertise-card__title">Environmental</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="header-new-layout__expertise-row">
                        <div class="header-new-layout__expertise-group">
                            <h5 class="header-new-layout__title">Practical Expertise</h5>
                            <div class="expertise-scroll-wrapper">
                                <ul class="expertise-cards">
                                    <li class="expertise-card" data-color="purple" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-drafting-compass"></i>
                                                <span class="expertise-card__title">Product & UX Design</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="lightblue" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fab fa-salesforce"></i>
                                                <span class="expertise-card__title">Salesforce</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="grey" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-mobile-alt"></i>
                                                <span class="expertise-card__title">Mobile Apps</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="blue" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fab fa-react"></i>
                                                <span class="expertise-card__title">React Native</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                    <li class="expertise-card" data-color="yellow" data-description="TBA.">
                                        <div>
                                            <div class="expertise-card__content">
                                                <i class="fas fa-sync-alt"></i>
                                                <span class="expertise-card__title">Agile</span>
                                            </div>
                                            <p class="expertise-card__description"></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End of New Header Content -->

            </div>
        </header>

        <section id="about" class="section section--grey">
            <div class="container">
                <div class="about__grid">
                    <div class="about__category">
                        <div class="about__header">
                            <h3 class="about__title">Academia & education. <span class="about__subtitle">Where and what
                                    I've
                                    learnt.</span></h3>
                        </div>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>MSc Business & Management <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Plymouth University, Graduate School of Management</a></h6>
                                <p class="about__description"><em>Masters with Distinction</em> — Dean's List of
                                    Academic
                                    Excellence</p>
                                <p class="about__date"><time datetime="2014">2014</time> → <time
                                        datetime="2016">2016</time>
                                </p>
                            </li>
                            <li class="about__item">
                                <h6>BSc (Hons) Computer Science <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Plymouth University, School of Computing & Mathematics</a></h6>
                                <p class="about__description"><em>First-Class Honours</em> — 3x Dean's List of Academic
                                    Excellence</p>
                                <p class="about__date"><time datetime="2011">2011</time> → <time
                                        datetime="2014">2014</time>
                                </p>
                            </li>
                        </ol>

                        <div class="about__header" style="margin-top: var(--space-l);">
                            <h3 class="about__title">The story so far. <span class="about__subtitle">A timeline of my
                                    professional experience.</span></h3>
                        </div>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>Digital Education Product Manager <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Academic Development, Plymouth University</a></h6>
                                <p class="about__description">Building a first class student success platform for the
                                    Faculty of Medicine and Dentistry. Member of <span class="tooltip-trigger"
                                        data-tooltip="<div style='text-align: left;'><strong>Faculty of Health Committees:</strong><ul style='margin-top: 0.5rem; padding-left: 1rem; list-style: disc;'><li>IT & GDPR Committee</li><li>Teaching, Learning, & Quality Committee</li><li>Assessment Working Group</li></ul></div>">
                                        multiple faculty committees</span>.</p>
                                <p class="about__date"><time datetime="2019">2019</time> → Present</p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#pulse" class="project-tag project-link"
                                            data-project-id="pulse">PULSE</a>
                                        <a href="#" class="project-tag">On-Clinic Assessment</a>
                                        <a href="#wave" class="project-tag project-link" data-project-id="wave">Digital
                                            Assistant</a>
                                        <a href="#learning-analytics" class="project-tag project-link"
                                            data-project-id="learning-analytics">Learning Analytics</a>
                                    </div>
                                </div>
                            </li>
                            <li class="about__item">
                                <h6>Product Architect; Senior UX Designer & Engineer <small>@</small> <a
                                        href="https://iotecglobal.com" class="link">iotec
                                        Global</a></h6>
                                <p class="about__description">Leading UX and product design, building campaign
                                    management
                                    and reporting tools for a cutting edge AdTech platform.</p>
                                <p class="about__date"><time datetime="2016">2016</time> → <time
                                        datetime="2018">2018</time>
                                </p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#horizon" class="project-tag project-link"
                                            data-project-id="horizon">iotec Horizon</a>
                                    </div>
                                </div>
                            </li>
                            <li class="about__item">
                                <h6>iOS Developer <small>@</small> <a href="#" class="link">Multiple Clients</a></h6>
                                <p class="about__description">Worked with clients like Wild Planet Trust building
                                    educational
                                    iOS
                                    applications.</p>
                                <p class="about__date"><time datetime="2010">2010</time> → <time
                                        datetime="2025">Present</time>
                                </p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#investigate" class="project-tag project-link"
                                            data-project-id="investigate">Investigate Invertebrates</a>
                                        <a href="#stories" class="project-tag project-link"
                                            data-project-id="stories">Stories</a>
                                        <a href="#trifecta" class="project-tag project-link"
                                            data-project-id="trifecta">Trifecta Workout</a>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </div>
                    <div class="about__category">
                        <div class="about__header" style="margin-top: var(--space-l);">
                            <h3 class="about__title">Giving back. <span class="about__subtitle">Advisory and
                                    volunteering roles.</span></h3>
                        </div>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>Assessment Alliance Security Group <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Medical Schools Council</a></h6>
                                <p class="about__description">The Assessment Alliance is a partnership to improve
                                    undergraduate assessment practice. This partnership consists of all undergraduate
                                    members of the Medical Schools Council. Its aim is to help ensure the confidence of
                                    the
                                    public, employers, and the regulator in the quality of medical school graduates.

                                <p class="about__description">The Security Group is established to ensure the integrity,
                                    confidentiality, and
                                    fairness
                                    of assessments across member medical schools.</p>
                                </p>
                                <p class="about__date"><time datetime="2025">2025</time> → Present</p>
                            </li>
                            <li class="about__item">
                                <h6>Education <small>@</small> <a href="#" class="link">Wild Planet Trust ↗</a></h6>
                                <p class="about__date"><time datetime="2004">2004</time> → 2023</p>
                            </li>
                            <li class="about__item">
                                <h6>Mayor's Youth Council Representative <small>@</small> <a href="#" class="link">Town
                                        Council</a></h6>
                                <p class="about__date"><time datetime="2006">2006</time> → 2009</p>
                            </li>
                        </ol>

                        <div class="about__header" style="margin-top: var(--space-l);">
                            <h3 class="about__title">Sharing knowledge. <span class="about__subtitle">A selection of
                                    speaking engagements.</span></h3>
                        </div>
                        <ol class="about__list">
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Annual European Conference on Assessment in Medical Education | EBMA (European
                                        Board of Medical Assessors)
                                        - The Future of Assessment in Medical Education: Opportunities and Threats</h6>
                                    <p class="about__date"><time datetime="2024">2024</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Symposium — Adaptive Testing: Current and Future
                                        Perspectives.</p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Implementation of Content Adaptive
                                        Progress Tests at Peninsula Medical School in Plymouth.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Salesforce UK/EMEA Education User Group</h6>
                                    <p class="about__date"><time datetime="2024">2024</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Building a Student Success Platform for Medicine &
                                        Dentistry.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Peninsula Medical School Personalised Assessment Conference</h6>
                                    <p class="about__date"><time datetime="2022">2022</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Visualising Adaptive Progress Testing in Personalised
                                        Assessment and Considering Opportunities for Predictive Analysis.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Learning Without Frontiers Conference, London</h6>
                                    <p class="about__date"><time datetime="2012">2012</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Xbox Marks the Spot.</p>
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <section id="work" class="section">
            <div class="container">
                <div class="about__header" style="text-align: center; margin-bottom: var(--space-l);">
                    <h3 class="about__title">Selected Work. <span class="about__subtitle">A selection of recent work and
                            side projects.</span></h3>
                </div>
                <!-- This grid will be populated by JavaScript -->
                <div class="work__grid work__grid--prominent" id="selected-work-grid"></div>
            </div>
        </section>

        <section id="other-work" class="section section--grey">
            <div class="container">
                <div class="about__header">
                    <h3 class="about__title">Side quests & experiments. <span class="about__subtitle">A collection of
                            concepts and other fun things.</span></h3>
                </div>
            </div>
            <div class="horizontal-scroll-wrapper">
                <div class="work__grid" id="other-work-grid"></div>
                <button class="scroll-arrow left hidden" aria-label="Scroll left"><i
                        class="fas fa-chevron-left"></i></button>
                <button class="scroll-arrow right" aria-label="Scroll right"><i
                        class="fas fa-chevron-right"></i></button>
            </div>
        </section>

        <section id="contact" class="section">
            <div class="container contact-container">
                <h3>Get in Touch</h3>
                <p>I'm always open to discussing product design work or partnership opportunities. If you have a project
                    in
                    mind, please get in touch.</p>
                <a href="mailto:robin.w.bailey@gmail.com" class="btn">Email Me</a>
            </div>
        </section>

        <footer class="section footer">
            <div class="footer-wave">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120"
                    preserveAspectRatio="none">
                    <path
                        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,23.5V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                        class="footer-wave__fill"></path>
                </svg>
            </div>
            <div class="container footer__container">
                <div class="footer__top">
                    <div class="footer__about">
                        <h4 class="footer__logo">Robin Bailey</h4>
                        <p class="footer__tagline">Creativity & Clarity</p>
                    </div>
                    <div class="footer__links">
                        <a href="https://twitter.com/RobinBailey" class="footer__link" target="_blank"
                            rel="noopener noreferrer" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/robinwbailey/" class="footer__link" target="_blank"
                            rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="mailto:robin.w.bailey@gmail.com" class="footer__link" aria-label="Email"><i
                                class="fas fa-envelope"></i></a>
                    </div>
                </div>
                <div class="footer__bottom">
                    <div class="footer__copyright">
                        <p>&copy; <span id="year"></span> Robin Bailey. All rights reserved.</p>
                    </div>
                    <div class="footer__meta">
                        <p class="footer__location">
                            <i class="fas fa-map-marker-alt"></i>
                            Saltash, England
                            <span id="local-time" class="footer__time"></span>
                        </p>
                        <a href="#top" class="footer__back-to-top">
                            Back to Top <i class="fas fa-arrow-up"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <!-- Container for dynamically loaded project content -->
    <div id="project-detail-container" style="display: none;"></div>

    <script src="portfolio-data.js"></script>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        function updateLocalTime() {
            const timeElement = document.getElementById('local-time');
            if (timeElement) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-GB', {
                    timeZone: 'Europe/London',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                }).toUpperCase();
                timeElement.textContent = timeString;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateLocalTime();
            setInterval(updateLocalTime, 60000);

            // --- Expertise Card Description Logic ---
            document.querySelectorAll('.expertise-card').forEach(card => {
                const description = card.dataset.description;
                const p = card.querySelector('.expertise-card__description');
                if (p && description) {
                    p.textContent = description;
                }
            });

            // --- HTML Tooltip Logic (New) ---
            const tooltipElement = document.createElement('div');
            tooltipElement.className = 'tooltip';
            document.body.appendChild(tooltipElement);

            document.querySelectorAll('.tooltip-trigger').forEach(trigger => {
                let hideTimeout;

                const show = () => {
                    clearTimeout(hideTimeout);
                    const tooltipContent = trigger.getAttribute('data-tooltip');
                    if (!tooltipContent) return;

                    tooltipElement.innerHTML = tooltipContent;

                    const triggerRect = trigger.getBoundingClientRect();

                    // Temporarily make it visible but off-screen to calculate size correctly
                    tooltipElement.style.visibility = 'hidden';
                    tooltipElement.style.top = '-9999px';
                    tooltipElement.style.left = '-9999px';
                    tooltipElement.classList.add('visible');

                    const tooltipRect = tooltipElement.getBoundingClientRect();

                    let top = triggerRect.top - tooltipRect.height - 10; // 10px gap from trigger
                    let left = triggerRect.left + (triggerRect.width / 2) - (tooltipRect.width / 2);

                    // Adjust position if it goes off-screen
                    if (left < 5) left = 5;
                    if ((left + tooltipRect.width) > window.innerWidth) {
                        left = window.innerWidth - tooltipRect.width - 5;
                    }
                    if (top < 5) {
                        top = triggerRect.bottom + 10;
                    }

                    tooltipElement.style.top = `${top + window.scrollY}px`;
                    tooltipElement.style.left = `${left + window.scrollX}px`;
                    tooltipElement.style.visibility = 'visible';
                };

                const hide = () => {
                    hideTimeout = setTimeout(() => {
                        tooltipElement.classList.remove('visible');
                    }, 100);
                };

                trigger.addEventListener('mouseenter', show);
                trigger.addEventListener('mouseleave', hide);
                tooltipElement.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                tooltipElement.addEventListener('mouseleave', hide);
            });


            // --- Dynamic Content Generation ---
            const selectedWorkGrid = document.getElementById('selected-work-grid');
            const otherWorkGrid = document.getElementById('other-work-grid');

            function createImpactMetricsHTML(impactArray) {
                if (!impactArray || impactArray.length === 0) return '';
                return impactArray.map(metric => `
                    <div class="impact-metric">
                        <i class="${metric.icon}"></i>
                        <div>
                            <strong>${metric.stat}</strong>
                            <span>${metric.description}</span>
                        </div>
                    </div>
                `).join('');
            }

            function createTagsHTML(tagsArray) {
                if (!tagsArray || tagsArray.length === 0) return '';
                return tagsArray.map(tag => `<span class="tag">${tag}</span>`).join('');
            }

            function getIconForFeatureTag(tag) {
                const iconMap = {
                    'Education': 'fas fa-graduation-cap', 'Health': 'fas fa-heartbeat',
                    'Side Project': 'fas fa-wrench', 'Branding': 'fas fa-palette',
                    'Concept': 'fas fa-lightbulb', 'AdTech': 'fas fa-bullhorn',
                    'Client Work': 'fas fa-handshake', 'Consultancy': 'fas fa-users',
                    'Government': 'fas fa-landmark', 'Health & Social Care': 'fas fa-clinic-medical',
                    'AI': 'fas fa-robot', 'Chatbot': 'fas fa-comments',
                    'Mobile': 'fas fa-mobile-alt', 'Fitness': 'fas fa-dumbbell',
                    'Content Aggregation': 'fas fa-newspaper', 'Marketplace': 'fas fa-store'
                };
                return iconMap[tag] || 'fas fa-tag';
            }

            function createFeatureTagsHTML(tagsArray) {
                if (!tagsArray || tagsArray.length === 0) return '';
                const tagsHTML = tagsArray.map(tag => {
                    const iconClass = getIconForFeatureTag(tag);
                    return `<span class="tag tag--feature"><i class="${iconClass}"></i> ${tag}</span>`;
                }).join('');
                return `<div class="work__item-feature-tags">${tagsHTML}</div>`;
            }


            portfolioData.selectedWork.forEach(project => {
                const projectEl = document.createElement('div');
                projectEl.id = `work-item-${project.id}`;
                projectEl.className = 'work__item work__item--prominent';
                projectEl.innerHTML = `
                    <a href="#${project.id}" class="work__item-link project-link" data-project-id="${project.id}">
                        <div class="work__item-image-wrapper">
                            <img src="${project.image}" alt="${project.title} Project Thumbnail" onerror="this.onerror=null;this.src='${project.fallbackImage || ''}';">
                            <div class="work__item-title-group">
                                <h6 class="work__item-title-on-image">${project.title}</h6>
                                ${project.client ? `<p class="work__item-client-on-image"><i class="fas fa-building"></i> ${project.client}</p>` : ''}
                            </div>
                        </div>
                        <div class="work__item-content">
                            <div class="work__item-details">
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Overview & Features</h4>
                                    <p class="work__item-overview">${project.overview}</p>
                                    ${createFeatureTagsHTML(project.featureTags)}
                                </div>
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Role & Skills</h4>
                                    <p class="work__item-overview">${project.roleAndSkills.description}</p>
                                    <div class="work__item-tags">${createTagsHTML(project.roleAndSkills.tags)}</div>
                                </div>
                            </div>
                            <div class="work__item-highlights">
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Outcomes & Impact</h4>
                                    <div class="work__item-impact">${createImpactMetricsHTML(project.impact)}</div>
                                </div>
                            </div>
                        </div>
                    </a>`;
                selectedWorkGrid.appendChild(projectEl);
            });

            portfolioData.otherProjects.forEach(project => {
                const projectEl = document.createElement('div');
                projectEl.id = `other-work-item-${project.id}`;
                projectEl.className = 'work__item';
                projectEl.innerHTML = `
                     <a href="#${project.id}" class="work__item-link project-link" data-project-id="${project.id}">
                        <div class="work__item-image-wrapper">
                            <img src="${project.image}" alt="${project.title} Project Thumbnail" onerror="this.onerror=null;this.src='${project.fallbackImage || ''}';">
                        </div>
                        <div class="work__item-body">
                            <div class="work__item-header">
                                <h6>${project.title}</h6>
                                ${project.client ? `<p class="work__item-client"><i class="fas fa-building"></i> ${project.client}</p>` : ''}
                            </div>
                            <p class="work__item-overview">${project.overview}</p>
                            ${createFeatureTagsHTML(project.featureTags)}
                            ${project.impact.length > 0 ? '<div class="work__item-divider"></div>' : ''}
                            <div class="work__item-impact">${createImpactMetricsHTML(project.impact)}</div>
                        </div>
                    </a>`;
                otherWorkGrid.appendChild(projectEl);
            });

            // --- Horizontal Scroll Logic ---
            const otherWorkWrapper = document.querySelector('.horizontal-scroll-wrapper');
            if (otherWorkWrapper) {
                const grid = otherWorkWrapper.querySelector('#other-work-grid');
                const leftBtn = otherWorkWrapper.querySelector('.scroll-arrow.left');
                const rightBtn = otherWorkWrapper.querySelector('.scroll-arrow.right');

                const updateScrollButtons = () => {
                    const { scrollLeft, scrollWidth, clientWidth } = grid;
                    leftBtn.classList.toggle('hidden', scrollLeft <= 0);
                    rightBtn.classList.toggle('hidden', scrollLeft >= scrollWidth - clientWidth - 1);
                    otherWorkWrapper.classList.toggle('at-end', scrollLeft >= scrollWidth - clientWidth - 1);
                };

                grid.addEventListener('scroll', updateScrollButtons);

                leftBtn.addEventListener('click', () => {
                    const scrollAmount = grid.clientWidth * 0.8; // Scroll by 80% of visible width
                    grid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                });

                rightBtn.addEventListener('click', () => {
                    const scrollAmount = grid.clientWidth * 0.8;
                    grid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                });

                // Initial check
                updateScrollButtons();
                // Check again after a short delay to account for image loading
                setTimeout(updateScrollButtons, 500);
            }


            // --- Navigation, Scroll, and Page Loading Logic ---
            const mainContent = document.getElementById('main-content');
            const projectDetailContainer = document.getElementById('project-detail-container');
            const nav = document.querySelector('.top-nav');
            const navLinks = nav.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('#main-content > header[id], #main-content > section[id]');
            let lastScrollY = window.scrollY;
            let lastClickedWorkItem = null;

            const onScroll = () => {
                if (mainContent.style.display === 'none') return;

                const scrollY = window.scrollY;
                const direction = scrollY > lastScrollY ? "down" : "up";

                if (window.innerWidth <= 768) {
                    if (scrollY > 100 && direction === "down") {
                        nav.style.bottom = '-100px';
                    } else {
                        nav.style.bottom = '1rem';
                    }
                }
                lastScrollY = scrollY < 0 ? 0 : scrollY;

                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (scrollY >= sectionTop - (window.innerHeight / 3)) {
                        currentSectionId = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const linkHref = link.getAttribute('href').substring(1);
                    if (linkHref === 'work' && (currentSectionId === 'work' || currentSectionId === 'other-work')) {
                        link.classList.add('active');
                    } else if (linkHref === currentSectionId) {
                        link.classList.add('active');
                    }
                });
            };

            window.addEventListener('scroll', onScroll);

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    lastClickedWorkItem = null;
                });
            });

            function findProjectData(projectId) {
                const allProjects = [...portfolioData.selectedWork, ...portfolioData.otherProjects];
                return allProjects.find(p => p.id === projectId);
            }

            function showProject(projectId) {
                const project = findProjectData(projectId);
                if (!project) {
                    console.warn('Project data not found for:', projectId);
                    history.replaceState(null, '', window.location.pathname + window.location.search);
                    hideProject();
                    return;
                }

                const detail = project.detailPage;
                const galleryHTML = detail.gallery.map(img => `
                    <div class="project-gallery__item">
                        <img src="${img.src}" onerror="this.onerror=null;this.src='${img.fallback}';" alt="${img.alt}">
                    </div>`).join('');

                const impactMetricsHTML = createImpactMetricsHTML(project.impact);

                projectDetailContainer.innerHTML = `
                    <nav class="project-nav">
                        <div class="container">
                            <a href="#" class="link back-to-portfolio">&larr; Back to Portfolio</a>
                        </div>
                    </nav>
                    <header class="section header project-header">
                        <div class="container">
                            <img src="${detail.heroImage}" onerror="this.onerror=null;this.src='${detail.fallbackHeroImage || ''}';" alt="${project.title} hero image" class="project-hero-image">
                            <div class="header__headings">
                                <h1>${project.title}</h1>
                                <h2>${project.subtitle || ''}</h2>
                                ${project.client ? `<h3 class="project-header__client"><i class="fas fa-building"></i> ${project.client}</h3>` : ''}
                            </div>
                            <div class="dash"></div>
                        </div>
                    </header>
                    <section class="section section--grey">
                        <div class="container">
                            <div class="project-detail__grid">
                                <div class="project-detail__column">
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-binoculars"></i> Overview & Features</h4>
                                        <p class="about__description">${detail.overview}</p>
                                        ${createFeatureTagsHTML(project.featureTags)}
                                    </div>
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-cogs"></i> Role & Skills</h4>
                                        <h6>${project.roleAndSkills.role}</h6>
                                        <p class="about__description">${project.roleAndSkills.description}</p>
                                        <div class="work__item-tags" style="margin-top: 1rem;">
                                            ${createTagsHTML(project.roleAndSkills.tags)}
                                        </div>
                                    </div>
                                </div>
                                <div class="project-detail__column">
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-chart-line"></i> Outcomes & Impact</h4>
                                        ${impactMetricsHTML ? `
                                        <div class="work__item-impact">
                                            ${impactMetricsHTML}
                                        </div>
                                        ` : '<p class="about__description">Impact details for this project are not yet available.</p>'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    ${galleryHTML ? `
                    <section class="section">
                        <div class="container">
                            <div class="work__header"><h3>Visuals & Screenshots</h3></div>
                            <div class="project-gallery__grid">${galleryHTML}</div>
                        </div>
                    </section>` : ''}
                `;

                mainContent.style.display = 'none';
                projectDetailContainer.style.display = 'block';
                window.scrollTo(0, 0);

                const backButton = projectDetailContainer.querySelector('.back-to-portfolio');
                if (backButton) {
                    backButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        history.back();
                    });
                }
            }

            function hideProject() {
                projectDetailContainer.style.display = 'none';
                mainContent.style.display = 'block';
                projectDetailContainer.innerHTML = '';
                if (lastClickedWorkItem) {
                    setTimeout(() => {
                        lastClickedWorkItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            }

            document.body.addEventListener('click', (e) => {
                const link = e.target.closest('.project-link');
                if (link) {
                    e.preventDefault();
                    const projectId = link.dataset.projectId;
                    lastClickedWorkItem = link.closest('.work__item, .project-tag');
                    history.pushState({ projectId: projectId }, '', `#${projectId}`);
                    showProject(projectId);
                }
            });

            window.addEventListener('popstate', (e) => {
                if (e.state && e.state.projectId) {
                    showProject(e.state.projectId);
                } else {
                    hideProject();
                }
            });

            function checkUrlOnLoad() {
                const projectId = window.location.hash.substring(1);
                if (projectId) {
                    setTimeout(() => {
                        const link = document.querySelector(`.project-link[data-project-id="${projectId}"]`);
                        if (link) {
                            lastClickedWorkItem = link.closest('.work__item, .project-tag');
                        }
                        history.replaceState({ projectId: projectId }, '', `#${projectId}`);
                        showProject(projectId);
                    }, 0);
                }
            }

            checkUrlOnLoad();
        });
    </script>

</body>

</html>