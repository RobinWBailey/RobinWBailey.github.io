<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Robin Bailey - Portfolio</title>
    <meta name="author" content="Robin Bailey" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="description" content="Product Manager, Designer, & Engineer." />
    <meta name="keywords" content="Robin Bailey, Portfolio, Design, Product, UI, Engineer" />
    <meta name="theme-color" content="#545a63" />
    <meta name="supported-color-schemes" content="light, dark" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://robinbailey.me/" />
    <meta property="og:title" content="Robin Bailey" />
    <meta property="og:description" content="Product Manager, Designer, & Engineer." />
    <meta property="og:image" content="https://robinbailey.me/assets/images/social-preview.png" />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://robinbailey.me/" />
    <meta property="twitter:creator" content="@robinbailey" />
    <meta property="twitter:title" content="Robin Bailey" />
    <meta property="twitter:description" content="Product Manager, Designer, & Engineer." />
    <meta property="twitter:image" content="https://robinbailey.me/assets/images/social-preview.png" />

    <link rel="icon" type="image/png" sizes="48x48" href="assets/images/Favicon.png" />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        xintegrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@1,400&family=Inter:wght@400;600&family=Lato:wght@700&display=swap"
        rel="stylesheet">

    <style>
        /* Assuming style.css is in the same directory */
        .work__item {
            scroll-margin-top: 12rem;
        }

        #project-detail-container {
            animation: fadeInUp 0.5s ease-out;
        }

        /* Added Lato font for uppercase headings */
        :root {
            --font-family-heading: 'Lato', sans-serif;
        }

        .expertise__title,
        .about__category h4,
        .projects__title,
        .work__item-section-title,
        .work__header h3 {
            font-family: var(--font-family-heading);
        }

        /* Tag consistency update */
        .tag {
            display: inline-flex;
            align-items: center;
            background-color: var(--color-background);
            color: var(--color-text-secondary);
            padding: 0.4rem 1rem;
            /* Adjusted padding */
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: var(--font-weight-semibold);
            border: 1px solid var(--color-border);
            transition: all 0.2s ease-in-out;
            text-decoration: none;
        }

        .tag:hover {
            background-color: var(--color-link);
            color: var(--color-background);
            border-color: var(--color-link);
            transform: translateY(-2px);
            text-decoration: none;
            box-shadow: 0 4px 10px var(--shadow-color);
        }

        /* Remove top border from footer */
        .footer__top {
            border-bottom: none;
        }

        /* Add gap between tags */
        .expertise__tags,
        .projects__tags,
        .work__item-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        /* Profile glow opacity variables */
        :root {
            --glow-opacity-1: 0.45;
            --glow-opacity-2: 0.65;
            --glow-opacity-3: 0.55;
            --glow-opacity-4: 0.75;
        }

        [data-theme="dark"] {
            /* Reset glow opacity for dark theme to be less intense */
            --glow-opacity-1: 0.3;
            --glow-opacity-2: 0.5;
            --glow-opacity-3: 0.4;
            --glow-opacity-4: 0.6;
        }

        @keyframes profile-glow {
            0% {
                box-shadow: 5px -5px 25px 0px rgba(var(--color-link-rgb), var(--glow-opacity-1));
                border-radius: 45% 55% 60% 40% / 65% 50% 50% 35%;
            }

            25% {
                box-shadow: -10px -8px 20px 2px rgba(var(--color-link-rgb), var(--glow-opacity-2));
                border-radius: 65% 35% 40% 60% / 55% 60% 40% 45%;
            }

            50% {
                box-shadow: 0px 10px 28px 5px rgba(var(--color-link-rgb), var(--glow-opacity-3));
                border-radius: 45% 55% 60% 40% / 35% 50% 50% 65%;
            }

            75% {
                box-shadow: 10px 8px 22px 3px rgba(var(--color-link-rgb), var(--glow-opacity-4));
                border-radius: 35% 65% 60% 40% / 55% 40% 60% 45%;
            }

            100% {
                box-shadow: 5px -5px 25px 0px rgba(var(--color-link-rgb), var(--glow-opacity-1));
                border-radius: 45% 55% 60% 40% / 65% 50% 50% 35%;
            }
        }

        .header__profile::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20%;
            animation: profile-glow 10s ease-in-out infinite;
            z-index: -1;
        }
    </style>
</head>

<body id="top">

    <!-- Main Content Wrapper -->
    <main id="main-content">
        <nav class="top-nav">
            <ul>
                <li><a href="#home" class="nav-link active"><i class="fas fa-home"></i> <span>Home</span></a></li>
                <li><a href="#about" class="nav-link"><i class="fas fa-user"></i> <span>About</span></a></li>
                <li><a href="#work" class="nav-link"><i class="fas fa-briefcase"></i> <span>Work</span></a></li>
                <li><a href="#contact" class="nav-link"><i class="fas fa-envelope"></i> <span>Contact</span></a></li>
            </ul>
        </nav>

        <div class="theme-picker">
            <button class="theme-picker__toggle" aria-label="Toggle theme picker">
                ðŸŽ¨
            </button>
            <div class="theme-picker__panel">
                <div class="theme-picker__title">Choose Theme</div>
                <div class="theme-picker__grid">
                    <div class="theme-picker__option" data-theme="blue" title="Blue"></div>
                    <div class="theme-picker__option" data-theme="purple" title="Purple"></div>
                    <div class="theme-picker__option" data-theme="green" title="Green"></div>
                    <div class="theme-picker__option active" data-theme="orange" title="Orange"></div>
                    <div class="theme-picker__option" data-theme="pink" title="Pink"></div>
                    <div class="theme-picker__option" data-theme="dark" title="Dark"></div>
                </div>
            </div>
        </div>

        <header id="home" class="section header">
            <div class="container">
                <div class="header__profile"></div>
                <div class="header__headings">
                    <h1>Robin Bailey</h1>
                    <h2>Product Manager, Designer, & Engineer</h2>
                </div>
                <div class="header__description">
                    <p>I help take complex business challenges & work with you to design, architect, & implement user
                        focused technical product solutions with clarity.</p>
                    <p>Currently at <a href="https://plymouth.ac.uk" class="link">Plymouth University â†—</a> building the
                        next generation education experience for students in
                        the Faculty
                        of
                        Health and all students across the wider Digital Campus. Previously working in the
                        AdTech space
                        on Engineering, UX, and Product Design at <a href="https://wearesilverbullet.com/"
                            class="link">iotec Global â†—</a>.</p>
                    <p class="tagline">Creativity & Clarity</p>
                </div>
                <div class="dash"></div>
                <div class="current-status">
                    <span class="status-dot"></span>
                    <span>Available for consultancy or opportunities</span>
                </div>

                <div class="expertise">
                    <div class="expertise__group">
                        <h5 class="expertise__title">Sector Expertise</h5>
                        <div class="expertise__tags">
                            <span class="tag">Education</span>
                            <span class="tag">Health</span>
                            <span class="tag">Government</span>
                            <span class="tag">AdTech</span>
                            <span class="tag">Environmental</span>
                        </div>
                    </div>
                    <div class="expertise__group">
                        <h5 class="expertise__title">Practical Expertise</h5>
                        <div class="expertise__tags">
                            <span class="tag">Product & UX Design</span>
                            <span class="tag">Salesforce</span>
                            <span class="tag">Mobile Apps</span>
                            <span class="tag">React Native</span>
                            <span class="tag">Agile</span>
                        </div>
                    </div>
                </div>
                <div class="header__links">
                    <a href="https://twitter.com/RobinBailey" class="link" target="_blank" rel="noopener noreferrer"><i
                            class="fab fa-twitter"></i> Twitter</a>
                    <a href="https://www.linkedin.com/in/robinwbailey/" class="link" target="_blank"
                        rel="noopener noreferrer"><i class="fab fa-linkedin"></i> LinkedIn</a>
                    <a href="mailto:robin.w.bailey@gmail.com" class="link"><i class="fas fa-envelope"></i> Email</a>
                </div>
                <a href="#work" class="arrow-holder">
                    <div class="arrow bounce">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 18L12 6M12 18L17 13M12 18L7 13" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </a>
            </div>
        </header>

        <section id="about" class="section section--grey">
            <div class="container">
                <div class="about__grid">
                    <div class="about__category">
                        <h4><i class="fas fa-briefcase"></i> Experience</h4>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>Digital Education Product Manager <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Academic Development, Plymouth University</a></h6>
                                <p class="about__description">Building a first class student success platform for the
                                    Faculty of Medicine and Dentistry. Member of <span class="tooltip-trigger"
                                        data-tooltip="<div style='text-align: left;'><strong>Faculty of Health Committees:</strong><ul style='margin-top: 0.5rem; padding-left: 1rem; list-style: disc;'><li>IT & GDPR Committee</li><li>Teaching, Learning, & Quality Committee</li><li>Assessment Working Group</li></ul></div>">
                                        multiple faculty committees</span>.</p>
                                <p class="about__date"><time datetime="2019">2019</time> â†’ Present</p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#pulse" class="project-tag project-link"
                                            data-project-id="pulse">PULSE</a>
                                        <a href="#" class="project-tag">On-Clinic Assessment</a>
                                        <a href="#wave" class="project-tag project-link" data-project-id="wave">Digital
                                            Assistant</a>
                                        <a href="#learning-analytics" class="project-tag project-link"
                                            data-project-id="learning-analytics">Learning Analytics</a>
                                    </div>
                                </div>
                            </li>
                            <li class="about__item">
                                <h6>Product Architect; Senior UX Designer & Engineer <small>@</small> <a
                                        href="https://iotecglobal.com" class="link">iotec
                                        Global</a></h6>
                                <p class="about__description">Leading UX and product design, building campaign
                                    management
                                    and reporting tools for a cutting edge AdTech platform.</p>
                                <p class="about__date"><time datetime="2016">2016</time> â†’ <time
                                        datetime="2018">2018</time>
                                </p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#horizon" class="project-tag project-link"
                                            data-project-id="horizon">iotec Horizon</a>
                                    </div>
                                </div>
                            </li>
                            <li class="about__item">
                                <h6>iOS Developer <small>@</small> <a href="#" class="link">Multiple Clients</a></h6>
                                <p class="about__description">Worked with clients like Wild Planet Trust building
                                    educational
                                    iOS
                                    applications.</p>
                                <p class="about__date"><time datetime="2010">2010</time> â†’ <time
                                        datetime="2025">Present</time>
                                </p>
                                <div class="about__item-projects">
                                    <h6 class="projects__title">Related Projects</h6>
                                    <div class="projects__tags">
                                        <a href="#investigate" class="project-tag project-link"
                                            data-project-id="investigate">Investigate Invertebrates</a>
                                        <a href="#stories" class="project-tag project-link"
                                            data-project-id="stories">Stories</a>
                                        <a href="#trifecta" class="project-tag project-link"
                                            data-project-id="trifecta">Trifecta Workout</a>
                                    </div>
                                </div>
                            </li>
                        </ol>

                        <h4 style="margin-top: var(--space-l);"><i class="fas fa-hands-helping"></i> Advisory &
                            Volunteering
                        </h4>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>Assessment Alliance Security Group <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Medical Schools Council</a></h6>
                                <p class="about__description">The Assessment Alliance is a partnership to improve
                                    undergraduate assessment practice. This partnership consists of all undergraduate
                                    members of the Medical Schools Council. Its aim is to help ensure the confidence of
                                    the
                                    public, employers, and the regulator in the quality of medical school graduates.

                                <p class="about__description">The Security Group is established to ensure the integrity,
                                    confidentiality, and
                                    fairness
                                    of assessments across member medical schools.</p>
                                </p>
                                <p class="about__date"><time datetime="2025">2025</time> â†’ Present</p>
                            </li>
                            <li class="about__item">
                                <h6>Education <small>@</small> <a href="#" class="link">Wild Planet Trust â†—</a></h6>
                                <p class="about__date"><time datetime="2004">2004</time> â†’ 2023</p>
                            </li>
                            <li class="about__item">
                                <h6>Mayor's Youth Council Representative <small>@</small> <a href="#" class="link">Town
                                        Council</a></h6>
                                <p class="about__date"><time datetime="2006">2006</time> â†’ 2009</p>
                            </li>
                        </ol>
                    </div>
                    <div class="about__category">
                        <h4><i class="fas fa-university"></i> Education</h4>
                        <ol class="about__list">
                            <li class="about__item">
                                <h6>MSc Business & Management <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Plymouth University, Graduate School of Management</a></h6>
                                <p class="about__description"><em>Masters with Distinction</em> â€” Dean's List of
                                    Academic
                                    Excellence</p>
                                <p class="about__date"><time datetime="2014">2014</time> â†’ <time
                                        datetime="2016">2016</time>
                                </p>
                            </li>
                            <li class="about__item">
                                <h6>BSc (Hons) Computer Science <small>@</small> <a href="https://plymouth.ac.uk"
                                        class="link">Plymouth University, School of Computing & Mathematics</a></h6>
                                <p class="about__description"><em>First-Class Honours</em> â€” 3x Dean's List of Academic
                                    Excellence</p>
                                <p class="about__date"><time datetime="2011">2011</time> â†’ <time
                                        datetime="2014">2014</time>
                                </p>
                            </li>
                        </ol>

                        <h4 style="margin-top: var(--space-l);"><i class="fas fa-microphone"></i> Speaking</h4>
                        <ol class="about__list">
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Annual European Conference on Assessment in Medical Education | EBMA (European
                                        Board of Medical Assessors)
                                        - The Future of Assessment in Medical Education: Opportunities and Threats</h6>
                                    <p class="about__date"><time datetime="2024">2024</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Symposium â€” Adaptive Testing: Current and Future
                                        Perspectives.</p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Implementation of Content Adaptive
                                        Progress Tests at Peninsula Medical School in Plymouth.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Salesforce UK/EMEA Education User Group</h6>
                                    <p class="about__date"><time datetime="2024">2024</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Building a Student Success Platform for Medicine &
                                        Dentistry.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Peninsula Medical School Personalised Assessment Conference</h6>
                                    <p class="about__date"><time datetime="2022">2022</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Visualising Adaptive Progress Testing in Personalised
                                        Assessment and Considering Opportunities for Predictive Analysis.</p>
                                </div>
                            </li>
                            <li class="about__item speaking__item">
                                <div class="speaking__title">
                                    <h6>Learning Without Frontiers Conference, London</h6>
                                    <p class="about__date"><time datetime="2012">2012</time></p>
                                </div>
                                <div class="speaking__topic">
                                    <i class="fas fa-quote-left"></i>
                                    <p class="about__description">Xbox Marks the Spot.</p>
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <section id="work" class="section">
            <div class="container">
                <div class="work__header">
                    <h3>Selected Work</h3>
                    <h5>A selection of recent work and side projects.</h5>
                </div>
                <!-- This grid will be populated by JavaScript -->
                <div class="work__grid work__grid--prominent" id="selected-work-grid"></div>
            </div>
        </section>

        <section id="other-work" class="section section--grey">
            <div class="container">
                <div class="work__header">
                    <h3>Other Projects</h3>
                    <h5>A collection of other projects, concepts, and experiments.</h5>
                </div>
                <!-- This grid will be populated by JavaScript -->
                <div class="work__grid" id="other-work-grid"></div>
            </div>
        </section>

        <section id="contact" class="section">
            <div class="container contact-container">
                <h3>Get in Touch</h3>
                <p>I'm always open to discussing product design work or partnership opportunities. If you have a project
                    in
                    mind, please get in touch.</p>
                <a href="mailto:robin.w.bailey@gmail.com" class="btn">Email Me</a>
            </div>
        </section>

        <footer class="section footer">
            <div class="footer-wave">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120"
                    preserveAspectRatio="none">
                    <path
                        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,23.5V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                        class="footer-wave__fill"></path>
                </svg>
            </div>
            <div class="container footer__container">
                <div class="footer__top">
                    <div class="footer__about">
                        <h4 class="footer__logo">Robin Bailey</h4>
                        <p class="footer__tagline">Creativity & Clarity</p>
                    </div>
                    <div class="footer__links">
                        <a href="https://twitter.com/RobinBailey" class="footer__link" target="_blank"
                            rel="noopener noreferrer" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/robinwbailey/" class="footer__link" target="_blank"
                            rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="mailto:robin.w.bailey@gmail.com" class="footer__link" aria-label="Email"><i
                                class="fas fa-envelope"></i></a>
                    </div>
                </div>
                <div class="footer__bottom">
                    <div class="footer__copyright">
                        <p>&copy; <span id="year"></span> Robin Bailey. All rights reserved.</p>
                    </div>
                    <div class="footer__meta">
                        <p class="footer__location">
                            <i class="fas fa-map-marker-alt"></i>
                            Saltash, England
                            <span id="local-time" class="footer__time"></span>
                        </p>
                        <a href="#top" class="footer__back-to-top">
                            Back to Top <i class="fas fa-arrow-up"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <!-- Container for dynamically loaded project content -->
    <div id="project-detail-container" style="display: none;"></div>

    <script src="portfolio-data.js"></script>
    <script>
        class ThemePicker {
            constructor() {
                this.currentTheme = localStorage.getItem('theme') || 'orange';
                this.toggle = document.querySelector('.theme-picker__toggle');
                this.panel = document.querySelector('.theme-picker__panel');
                this.options = document.querySelectorAll('.theme-picker__option');

                this.init();
            }

            init() {
                this.applyTheme(this.currentTheme);
                this.bindEvents();
            }

            bindEvents() {
                this.toggle.addEventListener('click', () => this.togglePanel());

                this.options.forEach(option => {
                    option.addEventListener('click', () => {
                        const theme = option.dataset.theme;
                        this.selectTheme(theme);
                    });
                });

                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.theme-picker')) {
                        this.closePanel();
                    }
                });
            }

            togglePanel() {
                this.panel.classList.toggle('active');
            }

            closePanel() {
                this.panel.classList.remove('active');
            }

            selectTheme(theme) {
                this.currentTheme = theme;
                this.applyTheme(theme);
                this.updateActiveOption(theme);
                this.closePanel();
                localStorage.setItem('theme', theme);
            }

            applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
            }

            updateActiveOption(theme) {
                this.options.forEach(option => {
                    option.classList.toggle('active', option.dataset.theme === theme);
                });
            }
        }

        document.getElementById('year').textContent = new Date().getFullYear();

        function updateLocalTime() {
            const timeElement = document.getElementById('local-time');
            if (timeElement) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-GB', {
                    timeZone: 'Europe/London',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                }).toUpperCase();
                timeElement.textContent = timeString;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new ThemePicker();
            updateLocalTime();
            setInterval(updateLocalTime, 60000);

            // --- HTML Tooltip Logic (New) ---
            const tooltipElement = document.createElement('div');
            tooltipElement.className = 'tooltip';
            document.body.appendChild(tooltipElement);

            document.querySelectorAll('.tooltip-trigger').forEach(trigger => {
                let hideTimeout;

                const show = () => {
                    clearTimeout(hideTimeout);
                    const tooltipContent = trigger.getAttribute('data-tooltip');
                    if (!tooltipContent) return;

                    tooltipElement.innerHTML = tooltipContent;

                    const triggerRect = trigger.getBoundingClientRect();

                    // Temporarily make it visible but off-screen to calculate size correctly
                    tooltipElement.style.visibility = 'hidden';
                    tooltipElement.style.top = '-9999px';
                    tooltipElement.style.left = '-9999px';
                    tooltipElement.classList.add('visible');

                    const tooltipRect = tooltipElement.getBoundingClientRect();

                    let top = triggerRect.top - tooltipRect.height - 10; // 10px gap from trigger
                    let left = triggerRect.left + (triggerRect.width / 2) - (tooltipRect.width / 2);

                    // Adjust position if it goes off-screen
                    if (left < 5) left = 5;
                    if ((left + tooltipRect.width) > window.innerWidth) {
                        left = window.innerWidth - tooltipRect.width - 5;
                    }
                    if (top < 5) {
                        top = triggerRect.bottom + 10;
                        // Note: The arrow direction will be incorrect if the tooltip is forced below.
                        // This can be enhanced with more logic to flip the arrow.
                    }

                    tooltipElement.style.top = `${top + window.scrollY}px`;
                    tooltipElement.style.left = `${left + window.scrollX}px`;
                    tooltipElement.style.visibility = 'visible'; // Make it visible at the correct position
                };

                const hide = () => {
                    // Use a timeout to allow the user to move their mouse over the tooltip
                    hideTimeout = setTimeout(() => {
                        tooltipElement.classList.remove('visible');
                    }, 100);
                };

                // Add event listeners to the trigger element
                trigger.addEventListener('mouseenter', show);
                trigger.addEventListener('mouseleave', hide);

                // Add listeners to the tooltip itself to keep it open when the mouse is over it
                tooltipElement.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                tooltipElement.addEventListener('mouseleave', hide);
            });


            // --- Dynamic Content Generation ---
            const selectedWorkGrid = document.getElementById('selected-work-grid');
            const otherWorkGrid = document.getElementById('other-work-grid');

            function createImpactMetricsHTML(impactArray) {
                if (!impactArray || impactArray.length === 0) return '';
                return impactArray.map(metric => `
                    <div class="impact-metric">
                        <i class="${metric.icon}"></i>
                        <div>
                            <strong>${metric.stat}</strong>
                            <span>${metric.description}</span>
                        </div>
                    </div>
                `).join('');
            }

            function createTagsHTML(tagsArray) {
                if (!tagsArray || tagsArray.length === 0) return '';
                return tagsArray.map(tag => `<span class="tag">${tag}</span>`).join('');
            }

            portfolioData.selectedWork.forEach(project => {
                const projectEl = document.createElement('div');
                projectEl.id = `work-item-${project.id}`;
                projectEl.className = 'work__item work__item--prominent';
                projectEl.innerHTML = `
                    <a href="#${project.id}" class="work__item-link project-link" data-project-id="${project.id}">
                        <div class="work__item-image-wrapper">
                            <img src="${project.image}" alt="${project.title} Project Thumbnail" onerror="this.onerror=null;this.src='${project.fallbackImage || ''}';">
                            <div class="work__item-title-group">
                                <h6 class="work__item-title-on-image">${project.title}</h6>
                                ${project.client ? `<p class="work__item-client-on-image"><i class="fas fa-building"></i> ${project.client}</p>` : ''}
                            </div>
                        </div>
                        <div class="work__item-content">
                            <div class="work__item-details">
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Overview</h4>
                                    <p class="work__item-overview">${project.overview}</p>
                                </div>
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Role & Skills</h4>
                                    <p class="work__item-overview">${project.roleAndSkills.description}</p>
                                    <div class="work__item-tags">${createTagsHTML(project.roleAndSkills.tags)}</div>
                                </div>
                            </div>
                            <div class="work__item-highlights">
                                <div class="work__item-section">
                                    <h4 class="work__item-section-title">Outcomes & Impact</h4>
                                    <div class="work__item-impact">${createImpactMetricsHTML(project.impact)}</div>
                                </div>
                            </div>
                        </div>
                    </a>`;
                selectedWorkGrid.appendChild(projectEl);
            });

            portfolioData.otherProjects.forEach(project => {
                const projectEl = document.createElement('div');
                projectEl.id = `other-work-item-${project.id}`;
                projectEl.className = 'work__item';
                projectEl.innerHTML = `
                     <a href="#${project.id}" class="work__item-link project-link" data-project-id="${project.id}">
                        <div class="work__item-image-wrapper">
                            <img src="${project.image}" alt="${project.title} Project Thumbnail" onerror="this.onerror=null;this.src='${project.fallbackImage || ''}';">
                        </div>
                        <div class="work__item-body">
                            <div class="work__item-header">
                                <h6>${project.title}</h6>
                                ${project.client ? `<p class="work__item-client"><i class="fas fa-building"></i> ${project.client}</p>` : ''}
                                <div class="work__item-tags">${createTagsHTML(project.tags)}</div>
                            </div>
                            <p class="work__item-overview">${project.overview}</p>
                            ${project.impact.length > 0 ? '<div class="work__item-divider"></div>' : ''}
                            <div class="work__item-impact">${createImpactMetricsHTML(project.impact)}</div>
                        </div>
                    </a>`;
                otherWorkGrid.appendChild(projectEl);
            });


            // --- Navigation, Scroll, and Page Loading Logic ---
            const mainContent = document.getElementById('main-content');
            const projectDetailContainer = document.getElementById('project-detail-container');
            const nav = document.querySelector('.top-nav');
            const navLinks = nav.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('#main-content > header[id], #main-content > section[id]');
            let lastScrollY = window.scrollY;
            let lastClickedWorkItem = null;

            const onScroll = () => {
                if (mainContent.style.display === 'none') {
                    return;
                }
                const scrollY = window.scrollY;
                const direction = scrollY > lastScrollY ? "down" : "up";

                if (window.innerWidth <= 768) {
                    if (scrollY > 100 && direction === "down") {
                        nav.style.bottom = '-100px';
                    } else {
                        nav.style.bottom = '1rem';
                    }
                }
                lastScrollY = scrollY < 0 ? 0 : scrollY;

                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (scrollY >= sectionTop - (window.innerHeight / 3)) {
                        currentSectionId = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const linkHref = link.getAttribute('href').substring(1);
                    if (linkHref === 'work' && (currentSectionId === 'work' || currentSectionId === 'other-work')) {
                        link.classList.add('active');
                    } else if (linkHref === currentSectionId) {
                        link.classList.add('active');
                    }
                });
            };

            window.addEventListener('scroll', onScroll);

            // Add click listener to main nav links to reset state
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    lastClickedWorkItem = null;
                });
            });

            function findProjectData(projectId) {
                const allProjects = [...portfolioData.selectedWork, ...portfolioData.otherProjects];
                return allProjects.find(p => p.id === projectId);
            }

            function showProject(projectId) {
                const project = findProjectData(projectId);
                if (!project) {
                    console.warn('Project data not found for:', projectId);
                    history.replaceState(null, '', window.location.pathname + window.location.search);
                    hideProject();
                    return;
                }

                const detail = project.detailPage;
                const galleryHTML = detail.gallery.map(img => `
                    <div class="project-gallery__item">
                        <img src="${img.src}" onerror="this.onerror=null;this.src='${img.fallback}';" alt="${img.alt}">
                    </div>`).join('');

                const impactMetricsHTML = createImpactMetricsHTML(project.impact);

                projectDetailContainer.innerHTML = `
                    <nav class="project-nav">
                        <div class="container">
                            <a href="#" class="link back-to-portfolio">&larr; Back to Portfolio</a>
                        </div>
                    </nav>
                    <header class="section header project-header">
                        <div class="container">
                            <img src="${detail.heroImage}" onerror="this.onerror=null;this.src='${detail.fallbackHeroImage || ''}';" alt="${project.title} hero image" class="project-hero-image">
                            <div class="header__headings">
                                <h1>${project.title}</h1>
                                <h2>${project.subtitle || ''}</h2>
                                ${project.client ? `<h3 class="project-header__client"><i class="fas fa-building"></i> ${project.client}</h3>` : ''}
                            </div>
                            <div class="dash"></div>
                        </div>
                    </header>
                    <section class="section section--grey">
                        <div class="container">
                            <div class="project-detail__grid">
                                <div class="project-detail__column">
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-binoculars"></i> Project Overview</h4>
                                        <p class="about__description">${detail.overview}</p>
                                    </div>
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-cogs"></i> Role & Skills</h4>
                                        <h6>${project.roleAndSkills.role}</h6>
                                        <p class="about__description">${project.roleAndSkills.description}</p>
                                        <div class="work__item-tags" style="margin-top: 1rem;">
                                            ${createTagsHTML(project.roleAndSkills.tags)}
                                        </div>
                                    </div>
                                </div>
                                <div class="project-detail__column">
                                    <div class="about__item">
                                        <h4 class="work__item-section-title"><i class="fas fa-chart-line"></i> Outcomes & Impact</h4>
                                        ${impactMetricsHTML ? `
                                        <div class="work__item-impact">
                                            ${impactMetricsHTML}
                                        </div>
                                        ` : '<p class="about__description">Impact details for this project are not yet available.</p>'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    ${galleryHTML ? `
                    <section class="section">
                        <div class="container">
                            <div class="work__header"><h3>Visuals & Screenshots</h3></div>
                            <div class="project-gallery__grid">${galleryHTML}</div>
                        </div>
                    </section>` : ''}
                `;

                mainContent.style.display = 'none';
                projectDetailContainer.style.display = 'block';
                window.scrollTo(0, 0);

                const backButton = projectDetailContainer.querySelector('.back-to-portfolio');
                if (backButton) {
                    backButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        history.back();
                    });
                }
            }

            function hideProject() {
                projectDetailContainer.style.display = 'none';
                mainContent.style.display = 'block';
                projectDetailContainer.innerHTML = '';
                if (lastClickedWorkItem) {
                    setTimeout(() => {
                        lastClickedWorkItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            }

            document.body.addEventListener('click', (e) => {
                const link = e.target.closest('.project-link');
                if (link) {
                    e.preventDefault();
                    const projectId = link.dataset.projectId;
                    lastClickedWorkItem = link.closest('.work__item, .project-tag');
                    history.pushState({ projectId: projectId }, '', `#${projectId}`);
                    showProject(projectId);
                }
            });

            window.addEventListener('popstate', (e) => {
                if (e.state && e.state.projectId) {
                    showProject(e.state.projectId);
                } else {
                    hideProject();
                }
            });

            function checkUrlOnLoad() {
                const projectId = window.location.hash.substring(1);
                if (projectId) {
                    setTimeout(() => {
                        const link = document.querySelector(`.project-link[data-project-id="${projectId}"]`);
                        if (link) {
                            lastClickedWorkItem = link.closest('.work__item, .project-tag');
                        }
                        history.replaceState({ projectId: projectId }, '', `#${projectId}`);
                        showProject(projectId);
                    }, 0);
                }
            }

            checkUrlOnLoad();
        });
    </script>

</body>

</html>